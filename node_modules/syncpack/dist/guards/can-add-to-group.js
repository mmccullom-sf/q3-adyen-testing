"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.canAddToGroup = void 0;
const minimatch_1 = require("minimatch");
const is_non_empty_array_1 = require("tightrope/guard/is-non-empty-array");
function canAddToGroup(group, instance) {
    const { dependencies, dependencyTypes, packages } = group.config;
    return (group.canAdd(instance) &&
        (!(0, is_non_empty_array_1.isNonEmptyArray)(dependencyTypes) || dependencyTypes.includes(instance.strategy.name)) &&
        (!(0, is_non_empty_array_1.isNonEmptyArray)(packages) ||
            packages.some((pattern) => (0, minimatch_1.minimatch)(instance.pkgName, pattern))) &&
        (!(0, is_non_empty_array_1.isNonEmptyArray)(dependencies) ||
            dependencies.some((pattern) => (0, minimatch_1.minimatch)(instance.name, pattern))));
}
exports.canAddToGroup = canAddToGroup;
